# 产品架构文档

> **创建时间**: 2025年12月02日 23:50  
> **最后更新**: 2025年12月02日 23:50  
> **维护人**: Cursor AI  
> **版本**: v2.2

---

## 📋 架构变更记录

| 时间 | 变更类型 | 模块 | 变更内容 | 操作人 |
|------|----------|------|----------|--------|
| 2025年12月02日 23:50 | 整合 | - | 从产品规划文档整合架构 | Cursor AI |
| 2025年11月30日 17:00 | 新增 | 活动内容管理 | 新增活动文章管理模块 | - |
| 2025年11月30日 | 新增 | 弹窗系统 | 新增敬请期待弹窗、活动推广弹窗 | - |

---

## 🏗️ 系统架构总览

```
┌─────────────────────────────────────────────────────────────────┐
│                          活动报名系统                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────┐      ┌─────────────────────┐          │
│  │   微信小程序端       │      │    管理端（Web）     │          │
│  │   (Taro + React)    │      │   (React + Antd)   │          │
│  └──────────┬──────────┘      └──────────┬──────────┘          │
│             │                            │                      │
│             └────────────┬───────────────┘                      │
│                          │                                      │
│                          ▼                                      │
│              ┌───────────────────────┐                          │
│              │    后端 API 服务       │                          │
│              │   (Python FastAPI)    │                          │
│              └───────────┬───────────┘                          │
│                          │                                      │
│                          ▼                                      │
│              ┌───────────────────────┐                          │
│              │      数据库            │                          │
│              │  (SQLite/PostgreSQL)  │                          │
│              └───────────────────────┘                          │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 📱 微信小程序端架构

### 导航结构

```
底部导航栏（胶囊浮岛风格）
├── 🏠 首页
├── 📅 报名
├── 👤 我的
└── 🤖 AI助手（独立按钮）
```

### 页面架构

```
小程序端
├── 首页 (index)
│   ├── 用户头部（头像、问候语、通知、主题切换）
│   ├── 搜索框
│   ├── 热门精选（轮播）
│   └── 历史活动（列表）
│
├── 搜索页 (search)
│   ├── 搜索框
│   ├── 最近搜索
│   ├── 最近浏览
│   ├── 热门搜索
│   └── 搜索结果
│
├── 活动列表页 (activities)
│   ├── 筛选栏
│   └── 活动卡片列表
│
├── 活动详情页 (activity-detail)
│   ├── 顶部封面（大图 + 渐变蒙层）
│   ├── Tab 切换
│   │   ├── 活动速览
│   │   ├── 活动议程
│   │   ├── 酒店信息
│   │   └── 图片直播
│   └── 底部交互栏（收藏、评论、点赞、转发、报名）
│
├── 报名表单 (signup)
│   ├── 步骤一：个人信息
│   ├── 步骤二：缴费信息
│   ├── 步骤三：住宿信息
│   └── 步骤四：交通信息
│
├── 我的页面 (profile)
│   ├── 活动（我的报名）
│   ├── 徽章（徽章墙）
│   ├── 通知（消息中心）
│   └── 设置
│
└── AI助手页 (ai-assistant)
    ├── 对话界面
    └── 快捷问题
```

### 弹窗系统

| 弹窗类型 | 触发条件 | 内容 |
|----------|----------|------|
| 敬请期待 | 点击"即将开始"活动 | 活动封面、标题、敬请期待按钮 |
| 活动推广 | 首次打开 + 有报名中活动 | 活动封面、标题、倒计时、立即报名 |
| 报名成功 | 提交报名后 | 成功提示、添加同行人员入口 |

### 活动状态点击逻辑

| 状态标签 | 含义 | 点击行为 |
|----------|------|----------|
| 报名中 | 活动正在接受报名 | 跳转到活动详情页 |
| 即将开始 | 活动即将开放报名 | 显示「敬请期待」弹窗 |
| 已开始 | 活动已开始（报名已截止） | 跳转到活动详情页（可签到） |
| 已结束 | 活动已结束 | 跳转到微信文章链接 |

---

## 💻 管理端架构

### 导航结构

```
管理端侧边栏
├── 📊 仪表盘
├── 📋 活动管理
│   ├── 活动列表
│   ├── 活动创建/编辑
│   └── 活动内容管理（文章）
├── 📝 报名管理
│   ├── 报名列表
│   ├── 审核管理
│   └── 缴费管理
├── 📄 表单设计
├── 🔔 通知中心
├── 🏷️ 徽章管理
├── 💬 评论管理
├── 📈 数据报表
└── ⚙️ 系统设置
```

### 功能模块

#### 仪表盘
- 统计卡片（活动数、报名数、签到率等）
- 活动流（近期活动动态）
- 待办提醒（待审核、待推送）

#### 活动管理
- 活动 CRUD
- 状态流转（草稿 → 发布 → 结束 → 归档）
- 活动文章管理（微信公众号文章链接）

#### 报名管理
- 报名列表（动态表头）
- 批量审核（通过/驳回）
- 导出（CSV/XLSX）
- 签到核销

#### 表单设计
- 可视化拖拽设计
- 字段类型：文本、选择、日期、上传等
- 模板保存与复用

#### 通知中心
- 通知模板管理
- 定时发送
- 发送记录

#### 徽章管理
- 徽章创建
- 发放规则配置
- 手动发放/撤回

---

## 🎖️ 徽章系统架构

### 徽章系列

```
徽章系统
├── 启程成就
│   ├── 初次登场（首次报名）
│   ├── 成功入选（报名成功）
│   ├── 准时到场（首次签到）
│   └── 全勤达人（全部签到）
│
├── 互动成就
│   ├── 开口有料（首次评论）
│   ├── 金句制造机（长评论/精选）
│   ├── 人气发言者（评论热门）
│   ├── 任务执行者（完成问卷）
│   ├── 连续打卡（连续2场）
│   └── 活力不息（连续4场）
│
├── 荣誉成就
│   ├── 徽章收藏家（获得3枚）
│   ├── 活动助力官（帮助他人报名）
│   └── 活动之星（获得10枚）
│
└── 隐藏彩蛋
    ├── 闪电报名王（报名<5分钟）
    ├── 午夜打卡者（22点后报名）
    ├── 沉默观察员（参与2次未评论）
    └── 周年纪念章（注册满1年）
```

---

## 🔄 核心业务流程

### 活动发布流程

```
创建活动 → 配置表单 → 发布 → 推送邀请
```

### 报名流程

```
用户填写资料 → 提交 → [审核] → 通知结果 → 生成签到码
```

### 签到流程

```
现场扫码/管理员核销 → 记录签到时间 → 更新状态
```

### 会后复盘流程

```
推送评分 → 收集反馈 → 导出数据 → 发放徽章 → 活动归档
```

---

## 📝 变更记录

| 时间 | 变更内容 | 操作人 |
|------|----------|--------|
| 2025年12月02日 23:50 | 创建文档，整合产品架构 | Cursor AI |

---

**下次更新**: 功能变更时同步更新

