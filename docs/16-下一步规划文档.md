# 下一步规划文档

> **创建时间**: 2025年12月08日 00:25  
> **最后更新**: 2025年12月09日 11:15  
> **维护人**: Cursor AI

---

## 📋 使用说明

本文档用于规划下一步开发任务。

- **待规划** → **进行中** → **已完成**（同步到 `1-项目进度文档.md`）
- 每个任务完成后，将其移动到"已完成"区域，并同步更新项目进度文档

---

## ✅ 已完成任务

### #P000 GitHub 仓库配置
- **完成时间**: 2025年12月08日 00:20
- **仓库地址**: https://github.com/VernonFred/activity-registration-system

### #P001 修复 H5 预览样式问题
- **完成时间**: 2025年12月09日 10:30
- **完成内容**: 修复 flex 布局、文字不换行、rem 适配脚本

### #P009 代码拆分重构
- **完成时间**: 2025年12月09日 09:30
- **完成内容**: TSX 组件拆分（4个页面），SCSS 合并回主文件

### #P010 报名列表页 UI 开发
- **完成时间**: 2025年12月09日 12:00
- **完成内容**: 
  - 页面基础结构 + 筛选栏组件（FilterBar）
  - 状态标签切换组件（StatusTabs）
  - 活动卡片组件（ActivityCard）
  - 列表数据渲染 + Mock 数据
  - 双主题适配（浅色/深色）
- **设计参考**: `lovable参考样式/截屏2025-12-09 10.04.11.png`

---

## 🔴 当前任务（进行中）

### #P002 活动详情页 UI 开发

- **创建时间**: 2025年12月08日 00:25
- **优先级**: P0
- **预计时间**: 3 小时
- **状态**: 🟡 进行中（下一个任务）
- **设计参考**: `小程序端设计/活动详情页面-*.png`
- **页面结构**:
  ```
  ┌─────────────────────────────────┐
  │ ← 返回        暑期培训会        │ 顶部导航
  ├─────────────────────────────────┤
  │ 活动速览│活动议程│酒店信息│图片直播│ Tab导航
  ├─────────────────────────────────┤
  │        [大图封面]              │
  │  长沙｜第十一届老客户暑期培训会 │
  │  [免费]                        │
  │  2023.03.30-2023.03.31         │
  │  04月14日00:00 截止报名        │
  │  长沙市｜喜来登大酒店           │
  │  目前报名人数：215人 🔥        │
  │  活动介绍...                   │
  ├─────────────────────────────────┤
  │  ⭐ 💬 ❤️ ↗️    [立即报名]    │ 底部浮岛
  └─────────────────────────────────┘
  ```
- **子任务**:
  - [ ] Step 1: 页面框架 + 顶部导航 + Tab 切换
  - [ ] Step 2: 活动速览 Tab（封面+信息+介绍）
  - [ ] Step 3: 底部胶囊浮岛（收藏/评论/点赞/分享/报名）
  - [ ] Step 4: 活动议程 Tab（时间轴）
  - [ ] Step 5: 双主题适配

---

### #P005 报名表单页开发

- **创建时间**: 2025年12月08日 00:25
- **优先级**: P0
- **预计时间**: 2.5 小时
- **状态**: 🔴 待开始
- **设计参考**: `小程序端设计/立即报名-*.png`, `lovable参考样式/截屏2025-12-09 10.04.42.png`
- **页面结构**:
  ```
  ┌─────────────────────────────────┐
  │  活动报名              [×]     │ 标题+关闭
  │  2025暑期培训会议               │ 副标题
  ├─────────────────────────────────┤
  │  ① ─── ② ─── ③ ─── ④         │ 步骤指示器
  │        个人信息                │ 步骤标题
  ├─────────────────────────────────┤
  │  姓名*        [输入框]         │
  │  学校*        [输入框]         │
  │  学院/部门*   [输入框]         │
  │  职位         [输入框]         │
  │  手机号码*    [输入] [快速获取]│
  ├─────────────────────────────────┤
  │       [下一步 →]               │ 底部按钮
  └─────────────────────────────────┘
  ```
- **子任务**:
  - [ ] Step 1: 步骤指示器组件（橙色圆圈+连接线）
  - [ ] Step 2: Step1 个人信息表单
  - [ ] Step 3: Step2 缴费信息表单
  - [ ] Step 4: Step3 住宿信息表单
  - [ ] Step 5: Step4 交通信息表单（到达+返程卡片）
  - [ ] Step 6: 报名成功页面
  - [ ] Step 7: 双主题适配

---

## 🟡 高优先级任务（P1）

### #P003 搜索功能前后端联调

- **优先级**: P1
- **预计时间**: 0.5 天
- **状态**: 🔴 待开始
- **子任务**:
  - [ ] 搜索 API 对接
  - [ ] 搜索结果展示
  - [ ] 最近搜索本地存储
  - [ ] 热门搜索数据获取

### #P006 我的页面开发

- **优先级**: P1
- **预计时间**: 1 天
- **状态**: 🔴 待开始
- **设计参考**: `小程序端设计/我的-*.png`, `小程序端设计/Profile.png`
- **子任务**:
  - [ ] 四 Tab（活动/徽章/通知/设置）
  - [ ] 个人信息展示
  - [ ] 我的报名列表

---

## 🟢 中优先级任务（P2）

### #P007 图标统一替换

- **优先级**: P2
- **预计时间**: 0.5 天
- **状态**: 🔴 待开始

### #P008 AI 助手页面开发

- **优先级**: P2
- **预计时间**: 1 天
- **状态**: 🔴 待开始

---

## 📅 本周详细计划（2025年12月09日 - 12月14日）

### 📆 12月09日（周一）- 今日

| 时间段 | 任务 | 子任务 | 预计时长 |
|--------|------|--------|----------|
| 上午 | #P010 报名列表页 | Step 1: 页面结构 + 筛选栏 | 30min |
| 上午 | #P010 报名列表页 | Step 2: 状态标签切换 | 20min |
| 上午 | #P010 报名列表页 | Step 3: 活动卡片组件 | 40min |
| 下午 | #P010 报名列表页 | Step 4: 列表渲染 + Mock | 20min |
| 下午 | #P010 报名列表页 | Step 5: 双主题适配 | 30min |
| 下午 | #P002 活动详情页 | Step 1: 页面框架 + Tab | 40min |

**今日目标**: 完成报名列表页 + 开始活动详情页

---

### 📆 12月10日（周二）

| 时间段 | 任务 | 子任务 | 预计时长 |
|--------|------|--------|----------|
| 上午 | #P002 活动详情页 | Step 2: 活动速览 Tab | 50min |
| 上午 | #P002 活动详情页 | Step 3: 底部胶囊浮岛 | 40min |
| 下午 | #P002 活动详情页 | Step 4: 活动议程 Tab | 50min |
| 下午 | #P002 活动详情页 | Step 5: 双主题适配 | 40min |

**今日目标**: 完成活动详情页（速览+议程+底部浮岛）

---

### 📆 12月11日（周三）

| 时间段 | 任务 | 子任务 | 预计时长 |
|--------|------|--------|----------|
| 上午 | #P005 报名表单页 | Step 1: 步骤指示器组件 | 30min |
| 上午 | #P005 报名表单页 | Step 2: 个人信息表单 | 40min |
| 下午 | #P005 报名表单页 | Step 3: 缴费信息表单 | 30min |
| 下午 | #P005 报名表单页 | Step 4: 住宿信息表单 | 30min |

**今日目标**: 完成报名表单 Step 1-4

---

### 📆 12月12日（周四）

| 时间段 | 任务 | 子任务 | 预计时长 |
|--------|------|--------|----------|
| 上午 | #P005 报名表单页 | Step 5: 交通信息表单 | 40min |
| 上午 | #P005 报名表单页 | Step 6: 报名成功页 | 30min |
| 下午 | #P005 报名表单页 | Step 7: 双主题适配 | 30min |
| 下午 | H5 测试 | 测试所有新页面 | 30min |

**今日目标**: 完成报名表单页 + H5 测试

---

### 📆 12月13日（周五）

| 时间段 | 任务 | 子任务 | 预计时长 |
|--------|------|--------|----------|
| 上午 | #P003 搜索联调 | 搜索 API 对接 | 1h |
| 下午 | #P003 搜索联调 | 搜索结果 + 历史存储 | 1h |
| 下午 | 代码整理 | Git 提交 + 文档同步 | 30min |

**今日目标**: 完成搜索功能联调

---

### 📆 12月14日（周六）

| 时间段 | 任务 | 子任务 | 预计时长 |
|--------|------|--------|----------|
| 上午 | #P006 我的页面 | 页面框架 + 四Tab | 1h |
| 下午 | #P006 我的页面 | 活动列表 + 个人信息 | 1.5h |
| 下午 | 周回顾 | 更新进度文档 | 30min |

**今日目标**: 完成我的页面基础框架

---

## 📊 任务统计

| 优先级 | 待开始 | 进行中 | 已完成 |
|--------|--------|--------|--------|
| P0 紧急 | 2 | 1 | 2 |
| P1 高 | 2 | 0 | 0 |
| P2 中 | 2 | 0 | 0 |
| **合计** | **6** | **1** | **2** |

---

## 📋 开发顺序说明

```
报名列表页 → 活动详情页 → 报名表单页 → 搜索联调 → 我的页面
     ↓            ↓            ↓
  底部导航      从列表页     从详情页
  "报名"Tab    点击进入     点击"立即报名"
```

**页面关联**:
1. **报名列表页**: 底部导航"报名"Tab 的主页面
2. **活动详情页**: 从列表页点击活动卡片进入
3. **报名表单页**: 从详情页点击"立即报名"弹出

---

## 🔗 前后端数据对接计划

### 📊 现有后端 API 覆盖情况

| 前端页面 | 需要的 API | 后端状态 | 备注 |
|----------|-----------|----------|------|
| **报名列表页** | `GET /activities` | ✅ 已有 | 需确认筛选参数 |
| **报名列表页** | 活动评分 | ⚠️ 需聚合 | feedbacks 表有 rating，需计算平均分 |
| **活动详情页** | `GET /activities/{id}` | ✅ 已有 | - |
| **活动详情页** | `GET /activities/{id}/engagement` | ✅ 已有 | 收藏/点赞/分享数量 |
| **活动详情页** | `GET /activities/{id}/comments` | ✅ 已有 | 评论列表 |
| **活动详情页** | `POST /activities/{id}/favorite` | ✅ 已有 | 收藏功能 |
| **活动详情页** | `POST /activities/{id}/like` | ✅ 已有 | 点赞功能 |
| **活动详情页** | `POST /activities/{id}/share` | ✅ 已有 | 分享记录 |
| **报名表单页** | `POST /signups` | ✅ 已有 | 提交报名 |
| **报名表单页** | `POST /signups/{id}/companions` | ✅ 已有 | 同行人员 |
| **我的页面** | `GET /users/me` | ✅ 已有 | 用户信息 |
| **我的页面** | `GET /badges/me` | ✅ 已有 | 我的徽章 |
| **我的页面** | `GET /notifications/me` | ✅ 已有 | 我的通知 |

### ⚠️ 需要后端补充的内容

#### 1. 数据库字段补充

| 表名 | 需新增字段 | 类型 | 说明 | 优先级 |
|------|-----------|------|------|--------|
| activities | `city` | VARCHAR(50) | 城市（用于筛选） | P1 |
| activities | `is_free` | BOOLEAN | 是否免费 | P1 |
| activities | `price` | DECIMAL | 价格（免费为0） | P2 |
| activities | `agenda` | JSON | 活动议程（时间+标题+主讲人） | P1 |
| activities | `avg_rating` | DECIMAL | 平均评分（冗余字段，提升查询效率） | P2 |
| activities | `signup_count` | INTEGER | 报名人数（冗余字段） | P2 |

#### 2. API 参数补充

| 接口 | 需补充参数 | 说明 | 优先级 |
|------|-----------|------|--------|
| `GET /activities` | `city` | 按城市筛选 | P1 |
| `GET /activities` | `status` | 按状态筛选（已开始/已结束/延期） | P1 |
| `GET /activities` | `start_time_from`, `start_time_to` | 按时间范围筛选 | P1 |
| `GET /activities` | `sort_by` | 排序方式 | P2 |

#### 3. 可能需要新增的 API

| 接口 | 描述 | 优先级 |
|------|------|--------|
| `GET /activities/featured` | 热门精选活动 | P2 |
| `GET /activities/hot-searches` | 热门搜索词 | P3 |
| `GET /activities/{id}/agenda` | 活动议程详情 | P1 |

### 📆 后端调整计划

| 阶段 | 时间 | 任务 | 说明 |
|------|------|------|------|
| **Phase 1** | 前端开发时 | 使用 Mock 数据 | 先完成 UI，不阻塞开发 |
| **Phase 2** | 页面完成后 | 确认 API 参数 | 与后端核对字段 |
| **Phase 3** | 联调阶段 | 补充缺失字段/API | 按优先级补充 |
| **Phase 4** | 测试阶段 | 端到端测试 | 验证完整流程 |

### 🔄 Mock 数据 → 真实 API 切换

```typescript
// config/index.ts
export const CONFIG = {
  USE_MOCK: true,  // Phase 1-2: true（使用 Mock）
                   // Phase 3-4: false（使用真实 API）
  API_BASE_URL: 'http://localhost:8000/api/v1',
}
```

**当前策略**：
1. 前端先用 Mock 数据完成 UI 开发
2. 每个页面完成后，记录需要的 API 字段
3. 统一进行后端补充和联调
4. 避免前端开发被后端阻塞

---

## 📝 变更记录

| 时间 | 变更内容 | 操作人 |
|------|----------|--------|
| 2025年12月09日 11:20 | 添加前后端数据对接计划，分析 API 覆盖情况 | Cursor AI |
| 2025年12月09日 11:15 | 重构文档，添加报名列表页，制定详细周计划 | Cursor AI |
| 2025年12月08日 00:25 | 创建文档，初始化任务列表 | Cursor AI |

---

**下次更新**: 任务状态变更时同步更新
