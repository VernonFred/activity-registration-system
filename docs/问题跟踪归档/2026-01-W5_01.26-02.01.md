# 问题跟踪文档（2026年第5周）

> **周次**: 2026年1月第5周（1月26日-2月1日）
> **创建时间**: 2026年1月5日
> **最后更新**: 2026年1月29日 15:30
> **维护人**: Cursor AI + 用户

---

## 📋 使用说明

本文档用于跟踪本周（2026年1月26日-2月1日）的问题、Bug 和需求。

### 问题状态

| 状态 | 说明 |
|------|------|
| 🔴 待处理 | 新提出的问题，等待处理 |
| 🟡 处理中 | 正在解决中 |
| 🟢 已解决 | 问题已修复 |
| ⚪ 已关闭 | 问题已关闭（无需处理或重复） |

---

## 🟡 处理中

### #W5-001: 评论功能完整开发

**提出时间**: 2026年1月28日  
**优先级**: P1  
**状态**: 🟡 处理中（待确认）

**已完成的提交**：

| 提交ID | 描述 |
|--------|------|
| 617c8df | 评论/互动/用户服务层 |
| a3faca7 | 评论功能UI优化 |
| 1a92529 | 评论功能交互优化 |
| 63e560d | 连接线改为真正连续的弧线 |
| ac80c48 | 评论功能多项交互修复 |
| e6d8a84 | 三点菜单设计稿样式+安全区域+交互修复 |
| 0247cee | 菜单交互优化+拖拽手势+胶囊按钮样式 |

---

**用户反馈（第10轮）**：
1. 三点菜单样式太大了，需要缩小，显得精致些
2. 拖拽条下拉手势很别扭，键盘先消失，背后页面也在拉动，触发iOS原生下拉效果
3. 回复弹窗中其他人的评论没有三点菜单（王小二应该有但没有）
4. 终端警告：iOS日期格式不兼容

**AI回复（第10轮修复）**：

1. ✅ **三点菜单样式精致化**
   - 缩小padding：`24rpx 32rpx` → `16rpx 24rpx`
   - 缩小字体：`28rpx` → `24rpx`
   - 缩小图标：`32rpx` → `26rpx`
   - 缩小容器：`min-width: 220rpx` → `160rpx`
   - 减小阴影：更加柔和

2. ✅ **拖拽条手势优化**
   - 添加 `e.stopPropagation()` 阻止事件冒泡
   - 添加 `catchMove` 属性阻止页面滚动
   - 限制最大拖动距离：`Math.min(deltaY, 200)`
   - 添加平滑过渡动画
   - 减小关闭阈值：`100px` → `80px`

3. ✅ **回复弹窗三点菜单显示**
   - 为 `.reply-item` 添加 `padding-right: 40rpx` 预留空间
   - 为 `.reply-menu` 添加 `z-index: 10` 确保层级正确

4. ✅ **iOS日期格式兼容**
   - Mock数据日期改为ISO格式：`2026-01-05 14:30:00` → `2026-01-05T14:30:00`
   - `formatTime()` 函数添加兼容处理

**修改文件**：
- `CommentList.scss` - 菜单样式精致化
- `ReplyPanel.scss` - 菜单样式精致化、三点菜单显示
- `ReplyPanel.tsx` - iOS日期格式兼容
- `index.tsx` - 拖拽手势优化
- `constants.ts` - iOS日期格式兼容

**待确认**：请测试后反馈

---

## 📝 2026年1月29日 工作记录

### 完成内容

1. 三点菜单样式精致化
2. 拖拽条手势优化（阻止页面滚动）
3. 回复弹窗三点菜单显示修复
4. iOS日期格式兼容

---

## 🔗 相关文档

- [项目进度文档](../1-项目进度文档.md)
- [代码规范文档](../2-代码规范文档.md)
- [技术债务清单](../技术债务清单.md)

---

**归档提醒**: 本周日（2月1日）将本周问题归档
