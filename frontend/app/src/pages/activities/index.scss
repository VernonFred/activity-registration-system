/**
 * 我的活动列表页样式
 * 参考设计稿: 小程序端设计/我的-活动列表.png
 * 主色: 深绿 #1A3A2A
 */

// ─── 颜色变量 ───────────────────────────────────
$green-dark:    #1A3A2A;
$green-mid:     #2D7D46;
$green-light:   #E8F5EC;
$gray-bg:       #F2F2F2;
$gray-border:   #E0E0E0;
$gray-mid:      #8A8A8A;
$gray-light:    #BBBBBB;
$white:         #FFFFFF;
$red:           #D9534F;
$text-primary:  #1A1A1A;
$text-secondary:#555555;

// ─── 页面容器 ────────────────────────────────────
.my-activities-page {
  min-height: 100vh;
  background: $gray-bg;
  display: flex;
  flex-direction: column;
  padding-bottom: 200rpx;
}

.page-scroll {
  flex: 1;
}

// ─── 用户头部 ────────────────────────────────────
.user-header {
  background: $white;
  padding: 32rpx 32rpx 24rpx;
  margin-bottom: 24rpx;
}

.user-info-row {
  display: flex;
  align-items: flex-start;
  gap: 20rpx;
  margin-bottom: 20rpx;
}

.avatar-wrap {
  position: relative;
  flex-shrink: 0;
}

.user-avatar {
  width: 110rpx;
  height: 110rpx;
  border-radius: 50%;
  border: 4rpx solid $white;
  box-shadow: 0 2rpx 12rpx rgba(0,0,0,0.12);
}

.avatar-badge {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 36rpx;
  height: 36rpx;
  border-radius: 50%;
  background: $gray-bg;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2rpx solid $white;
}

.avatar-badge-icon {
  font-size: 20rpx;
}

.user-meta {
  flex: 1;
  padding-top: 8rpx;
}

.user-name {
  font-size: 36rpx;
  font-weight: 700;
  color: $text-primary;
  display: block;
  margin-bottom: 6rpx;
}

.user-title {
  font-size: 24rpx;
  color: $text-secondary;
  display: block;
}

.logout-btn {
  display: flex;
  align-items: center;
  gap: 6rpx;
  background: $gray-bg;
  border: 2rpx solid $gray-border;
  border-radius: 999rpx;
  padding: 10rpx 20rpx;
  flex-shrink: 0;
  margin-top: 8rpx;

  &:active { opacity: 0.7; }
}

.logout-icon {
  font-size: 24rpx;
  color: $gray-mid;
}

.logout-text {
  font-size: 24rpx;
  color: $text-secondary;
}

.bio-row {
  display: flex;
  align-items: center;
  gap: 8rpx;
}

.bio-text {
  font-size: 26rpx;
  color: $gray-mid;
}

.bio-edit {
  font-size: 26rpx;
  color: $gray-mid;
  &:active { opacity: 0.6; }
}

// ─── 功能 Tab 栏 ─────────────────────────────────
.function-tabs {
  display: flex;
  align-items: center;
  justify-content: space-around;
  background: $white;
  border-radius: 999rpx;
  margin: 0 32rpx 24rpx;
  padding: 10rpx;
  box-shadow: 0 2rpx 12rpx rgba(0,0,0,0.06);
}

.function-tab {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 72rpx;
  border-radius: 999rpx;
  transition: background 0.2s;

  &.active {
    background: $green-dark;
  }

  &:active { opacity: 0.8; }
}

.function-tab-icon {
  font-size: 34rpx;
}

// ─── 活动卡片列表 ────────────────────────────────
.activity-list {
  padding: 0 24rpx;
  display: flex;
  flex-direction: column;
  gap: 20rpx;
}

// ─── 活动卡片 ────────────────────────────────────
.my-activity-card {
  background: $white;
  border-radius: 24rpx;
  overflow: visible;
  box-shadow: 0 4rpx 20rpx rgba(0,0,0,0.07);
}

.card-main {
  padding: 32rpx 32rpx 24rpx;
}

// 标题行
.card-title-row {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 16rpx;
  margin-bottom: 14rpx;
}

.card-title {
  font-size: 32rpx;
  font-weight: 700;
  color: $text-primary;
  flex: 1;
  line-height: 1.4;
}

// 状态标签
.status-badge {
  flex-shrink: 0;
  padding: 8rpx 20rpx;
  border-radius: 999rpx;
  margin-top: 4rpx;

  &.registered {
    background: $green-dark;
  }

  &.participated {
    background: $gray-mid;
  }
}

.status-badge-text {
  font-size: 22rpx;
  color: $white;
  font-weight: 500;
}

// 描述
.card-desc {
  font-size: 26rpx;
  color: $text-secondary;
  line-height: 1.6;
  display: block;
  margin-bottom: 12rpx;
}

// 日期
.card-date {
  font-size: 24rpx;
  color: $gray-mid;
  display: block;
  margin-bottom: 20rpx;
}

// 互动数据行
.card-stats-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.stats-group {
  display: flex;
  align-items: center;
  gap: 24rpx;
}

.stat-item {
  display: flex;
  align-items: center;
  gap: 6rpx;
}

.stat-icon {
  font-size: 24rpx;

  &.liked  { color: #E53935; }
  &.comment { color: $gray-light; }
  &.fav    { color: #F4A438; }
  &.share  { color: $gray-light; }
}

.stat-num {
  font-size: 22rpx;
  color: $text-secondary;
}

// 展开按钮
.expand-btn {
  width: 48rpx;
  height: 48rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: transform 0.3s;

  &.expanded .expand-icon {
    display: inline-block;
    transform: rotate(180deg);
  }

  &:active { opacity: 0.6; }
}

.expand-icon {
  font-size: 30rpx;
  color: $gray-mid;
  display: inline-block;
  transition: transform 0.3s;
}

.expanded .expand-icon {
  transform: rotate(180deg);
}

// ─── 展开区域 ────────────────────────────────────
.card-expand {
  padding: 0 32rpx 24rpx;
}

.expand-divider {
  height: 2rpx;
  background: $gray-border;
  margin-bottom: 20rpx;
}

// 参与者行
.participant-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16rpx 0;
  border-bottom: 1rpx solid $gray-border;
  position: relative;

  &:last-of-type {
    border-bottom: none;
  }
}

.participant-left {
  display: flex;
  align-items: center;
  gap: 12rpx;
  flex: 1;
  min-width: 0;
}

.participant-name {
  font-size: 28rpx;
  color: $text-primary;
  font-weight: 500;
}

.transport-link {
  display: flex;
  align-items: center;
  gap: 4rpx;
  &:active { opacity: 0.6; }
}

.transport-arrow {
  font-size: 22rpx;
  color: $green-mid;
}

.transport-text {
  font-size: 24rpx;
  color: $green-mid;
  text-decoration: underline;
}

// 操作区
.participant-actions {
  display: flex;
  align-items: center;
  gap: 12rpx;
  flex-shrink: 0;
  position: relative;
}

.tag-done {
  padding: 6rpx 16rpx;
  border-radius: 999rpx;
  background: $gray-bg;
  border: 1rpx solid $gray-border;
}

.tag-text {
  font-size: 22rpx;
  color: $gray-mid;
}

.tag-todo {
  padding: 6rpx 16rpx;
  border-radius: 999rpx;
  background: transparent;
  border: 1rpx solid $green-dark;
  &:active { opacity: 0.6; }
}

.tag-text-action {
  font-size: 22rpx;
  color: $green-dark;
}

// 三点菜单
.menu-wrap {
  position: relative;
}

.menu-btn {
  width: 44rpx;
  height: 44rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  &:active { opacity: 0.6; }
}

.menu-dots {
  font-size: 28rpx;
  color: $gray-mid;
  letter-spacing: 2rpx;
}

.dropdown-menu {
  position: absolute;
  right: 0;
  top: 52rpx;
  background: $white;
  border-radius: 16rpx;
  box-shadow: 0 8rpx 24rpx rgba(0,0,0,0.15);
  z-index: 100;
  overflow: hidden;
  min-width: 200rpx;
}

.menu-item {
  display: flex;
  align-items: center;
  gap: 12rpx;
  padding: 24rpx 28rpx;

  &:active { background: $gray-bg; }

  &:not(:last-child) {
    border-bottom: 1rpx solid $gray-border;
  }
}

.menu-item-icon {
  font-size: 24rpx;
  color: $text-secondary;

  &.red { color: $red; }
}

.menu-item-text {
  font-size: 26rpx;
  color: $text-primary;

  &.red { color: $red; }
}

// 参会凭证链接
.credential-link {
  font-size: 26rpx;
  color: $text-primary;
  font-weight: 500;
  &:active { opacity: 0.6; }
}

// 添加同行人员按钮
.add-companion-btn {
  margin-top: 24rpx;
  background: $green-dark;
  border-radius: 16rpx;
  padding: 28rpx;
  display: flex;
  align-items: center;
  justify-content: center;

  &:active { opacity: 0.85; }
}

.add-companion-text {
  font-size: 28rpx;
  color: $white;
  font-weight: 600;
}

// ─── 分页器 ──────────────────────────────────────
.pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 24rpx;
  padding: 40rpx 0 20rpx;
}

.page-arrow {
  font-size: 36rpx;
  color: $text-secondary;
  padding: 0 8rpx;

  &.disabled { color: $gray-light; }
  &:active { opacity: 0.6; }
}

.page-num {
  font-size: 28rpx;
  color: $text-secondary;
  width: 48rpx;
  height: 48rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;

  &.active {
    color: $text-primary;
    font-weight: 700;
  }

  &:active { opacity: 0.6; }
}

// ─── 底部安全区 ───────────────────────────────────
.bottom-spacer {
  height: 200rpx;
}

// ─── 深色主题覆写 ─────────────────────────────────
.theme-dark {
  &.my-activities-page { background: #111111; }

  .user-header { background: #1C1C1E; }
  .user-name   { color: #F5F5F5; }
  .user-title,
  .bio-text,
  .bio-edit,
  .logout-text  { color: #AAAAAA; }
  .logout-btn   { background: #2A2A2A; border-color: #444; }

  .function-tabs { background: #1C1C1E; }

  .my-activity-card { background: #1C1C1E; box-shadow: 0 4rpx 20rpx rgba(0,0,0,0.3); }
  .card-title   { color: #F5F5F5; }
  .card-desc    { color: #AAAAAA; }
  .card-date,
  .stat-num     { color: #888888; }
  .expand-icon  { color: #888888; }
  .expand-divider { background: #333333; }
  .participant-row { border-bottom-color: #333333; }
  .participant-name { color: #F5F5F5; }
  .tag-done     { background: #2A2A2A; border-color: #444; }
  .tag-text     { color: #AAAAAA; }
  .menu-dots    { color: #888; }
  .dropdown-menu { background: #2A2A2A; box-shadow: 0 8rpx 24rpx rgba(0,0,0,0.5); }
  .menu-item    { &:not(:last-child) { border-bottom-color: #444; } }
  .menu-item-text { color: #F5F5F5; }
  .credential-link { color: #F5F5F5; }
  .pagination .page-arrow { color: #AAAAAA; &.disabled { color: #555; } }
  .pagination .page-num { color: #AAAAAA; &.active { color: #F5F5F5; } }
}
